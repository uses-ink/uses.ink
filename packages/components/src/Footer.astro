---
import { ModeToggle } from "./ui/mode-toggle";
import { Footer as FooterPart } from "./ui/footer"

// @ts-ignore: Astro config
const buildCommit = __COMMIT_HASH__; const buildVersion = __VERSION__; const buildDate = __BUILD_TIME__;

const { auto, time } = Astro.props;
---
<div class="flex justify-center mb-12 text-xs">
    <div class="flex gap-4 items-center justify-between">
        <ModeToggle />
        <FooterPart client:load version={buildVersion} commit={buildCommit} date={buildDate} time={time} />
        {auto && (
            <>
                <p class="whitespace-nowrap !text-muted-foreground">Â·</p>
                <a
                    href="https://uses.ink/features.md#auto-generated-readme"
                    class="whitespace-nowrap !text-muted-foreground not-prose"
                >
                    <p class="whitespace-nowrap !text-muted-foreground">
                        Automatically generated
                    </p>
                </a>
            </>
        )}
    </div>
</div>

<script is:inline>
  const setToggleListener = () => {
    let toggleBtn = document.getElementById("mode-toggle");
    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle("dark");

      const isDark = element.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    };

    toggleBtn?.addEventListener("click", handleToggleClick);
  };
  
    setToggleListener();
  
    document.addEventListener("astro:after-swap", setToggleListener);
</script>
